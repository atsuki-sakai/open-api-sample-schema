# Dify Custom Tool 開発ガイド

## 概要
このリポジトリは、Difyプラットフォームで使用するカスタムツールの開発テンプレートとガイドラインを提供します。カスタムツールを使用することで、AIアプリケーションの機能を拡張し、外部APIとの連携を実現することができます。

## 前提条件
- Difyアカウント
- OpenAPI 3.1.0の基本的な理解
- REST APIの基本的な知識

## ファイル構成
```
.
├── README.md
├── schema.json        # OpenAPIスキーマ定義
├── examples/          # 使用例のサンプル
└── docs/             # 詳細なドキュメント
```

## スキーマの作成手順

### 1. 基本構造の定義
```json
{
  "openapi": "3.1.0",
  "info": {
    "title": "Your API Title",
    "description": "API description",
    "version": "v1.0.0"
  }
}
```

### 2. サーバー情報の追加
```json
{
  "servers": [
    {
      "url": "https://your-api-endpoint.com"
    }
  ]
}
```

### 3. エンドポイントの定義
- 各エンドポイントには一意の`operationId`が必要です
- パラメータとレスポンスを明確に定義してください
- 認証情報が必要な場合は、セキュリティスキーマを定義してください

## 実装のベストプラクティス

### 命名規則
- `operationId`: キャメルケース（例：`getWeatherForecast`）
- パラメータ名: キャメルケース
- スキーマ名: パスカルケース（例：`WeatherForecast`）

### セキュリティ考慮事項
- 機密情報は環境変数として管理
- 適切な認証メカニズムの実装
- レート制限の考慮

### エラーハンドリング
- 明確なエラーレスポンスの定義
- 適切なHTTPステータスコードの使用
- エラーメッセージの標準化

## Difyでの設定手順

1. カスタムツールの作成
   - Difyダッシュボードにアクセス
   - 「Tools」セクションを選択
   - 「Create Custom Tool」をクリック

2. スキーマのアップロード
   - 作成したOpenAPIスキーマをアップロード
   - 必要な認証情報を設定

3. テストと検証
   - 各エンドポイントのテスト実行
   - レスポンスの確認
   - エラーケースの検証

## トラブルシューティング

### 一般的な問題と解決方法
1. スキーマ検証エラー
   - 構文の確認
   - 必須フィールドの確認
   - バージョンの互換性確認

2. 認証エラー
   - 認証情報の確認
   - スコープの設定確認
   - トークンの有効期限確認

## サポートとリソース
- [Dify公式ドキュメント](https://docs.dify.ai)
- [OpenAPI仕様](https://swagger.io/specification/)
- [コミュニティフォーラム](https://community.dify.ai)

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。詳細は`LICENSE`ファイルを参照してください。